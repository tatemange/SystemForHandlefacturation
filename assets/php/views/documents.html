<div class="main-container">

    <!-- HEADER & ACTIONS -->
    <div class="section-headers">
        <h2 class="title">Factures</h2>
        <button id="btnNewInvoice" class="btn-primary" onclick="toggleInvoiceForm()">
            <i class="fa fa-plus"></i> Nouvelle Facture
        </button>
    </div>

    <!-- 1. TABLEAU DES FACTURES (LISTE) -->
    <div id="invoiceList" class="table-wrapper">
        <table class="table" id="documentsTable">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Numéro</th>
                    <th>Client</th>
                    <th>Montant Total</th>
                    <th>Statut</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr><td colspan="6" style="text-align:center">Chargement...</td></tr>
            </tbody>
        </table>
    </div>

    <!-- 2. FORMULAIRE DE CRÉATION (Caché par défaut) -->
    <div id="invoiceFormContainer" class="form-container" style="display: none;">
        <form id="createInvoiceForm" class="sign-in form">
            <fieldset>
                <legend>Nouvelle Facture</legend>

                <!-- Sélection Client -->
                <div class="group">
                    <label>Client</label>
                    <select id="selectClient" required>
                        <option value="">Sélectionner un client...</option>
                        <!-- Peuplé via JS -->
                    </select>
                </div>

                <!-- Tableau des Articles -->
                <div class="table-wrapper items-table-wrapper">
                    <table class="table" id="itemsTable">
                        <thead>
                            <tr>
                                <th style="width: 40%;">Produit / Service</th>
                                <th style="width: 15%;">Qté</th>
                                <th style="width: 20%;">Prix U.</th>
                                <th style="width: 20%;">Total</th>
                                <th style="width: 5%;"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Lignes dynamiques -->
                        </tbody>
                    </table>
                    <div class="items-add-button">
                        <button type="button" class="btn-sm" onclick="addItemRow()">
                            <i class="fa fa-plus"></i> Ajouter une ligne
                        </button>
                    </div>
                </div>

                <!-- Totaux -->
                <div class="total-display-container">
                    <div class="total-display-content">
                        <h3>Total: <span id="displayTotal">0</span> FCFA</h3>
                    </div>
                </div>

                <!-- Actions Formulaire -->
                <div class="group-end">
                    <button type="button" class="btn" onclick="toggleInvoiceForm()">Annuler</button>
                    <button type="submit" class="btn-primary" id="btnSaveInvoice">
                        <i class="fa fa-save"></i> Enregistrer
                    </button>
                </div>
            </fieldset>
        </form>
    </div>
</div>
